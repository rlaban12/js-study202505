<!--<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Title</title>
  <style>
      .counter {
          width: 40%;
          margin: 50px auto;
          text-align: center;
      }
  </style>
</head>
<body>

  <div class="counter">
    <h1>초콜릿 개수</h1>
    <h2 class="count1">0</h2>
    <button id="decrease1"> -</button>
    <button id="increase1"> +</button>
  </div>

  <div class="counter">
    <h1>치즈 개수</h1>
    <h2 class="count2">0</h2>
    <button id="decrease2"> -</button>
    <button id="increase2"> +</button>
  </div>

  <script>

    // 전역 변수 ===========================================================================
    const $decrease1Btn = document.getElementById('decrease1');
    const $increase1Btn = document.getElementById('increase1');
    const $count1 = document.querySelector('.count1');
    const $decrease2Btn = document.getElementById('decrease2');
    const $increase2Btn = document.getElementById('increase2');
    const $count2 = document.querySelector('.count2');

    // 함수 선언 ===========================================================================
    function  increaseDecreaseClosure() {
      let count = 0;

      function  increaseCount() {
        return ++count;
      }

      function decreaseCount() {
        return &#45;&#45;count;
      }

      return {
        increaseCount,
        decreaseCount
      }

    }

    // 코드 실행 ===========================================================================
    const { increaseCount: increaseChocoCount, decreaseCount: decreaseChocoCount } = increaseDecreaseClosure();
    const { increaseCount: increaseCheeseCount, decreaseCount: decreaseCheeseCount } = increaseDecreaseClosure();

    // 이벤트 바인딩 ===========================================================================

    // 초콜릿 개수 감소 버튼 이벤트
    $decrease1Btn.addEventListener('click', e => {
      $count1.textContent = decreaseChocoCount();
    });

    // 초콜릿 개수 증가 버튼 이벤트
    $increase1Btn.addEventListener('click', e => {
      $count1.textContent = increaseChocoCount();
    });

    // 치즈 개수 감소 버튼 이벤트
    $decrease2Btn.addEventListener('click', e => {
      $count2.textContent = decreaseCheeseCount();
    });

    // 치즈 개수 증가 버튼 이벤트
    $increase2Btn.addEventListener('click', e => {
      $count2.textContent = increaseCheeseCount();
    });

  </script>

</body>
</html>-->

<!--선생님 해설==============================================================================================-->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Title</title>
  <style>
      .counter {
          width: 40%;
          margin: 50px auto;
          text-align: center;
      }
  </style>
</head>
<body>

  <div class="counter">
    <h1>초콜릿 개수</h1>
    <h2 class="count1">0</h2>
    <button id="decrease1"> -</button>
    <button id="increase1"> +</button>
  </div>

  <div class="counter">
    <h1>치즈 개수</h1>
    <h2 class="count2">0</h2>
    <button id="decrease2"> -</button>
    <button id="increase2"> +</button>
  </div>

  <div class="counter">
    <h1>피망 개수</h1>
    <h2 class="count3">0</h2>
    <button id="decrease3"> -</button>
    <button id="increase3"> +</button>
  </div>
  <div class="counter">
    <h1>파인애플 개수</h1>
    <h2 class="count4">0</h2>
    <button id="decrease4"> -</button>
    <button id="increase4"> +</button>
  </div>

  <script>
    // 카운터들을 독립적으로 관리해주는 클로저함수 정의
    function counterClosure() {
      let count = 0;
      return {
        increment: () => ++count,
        decrement: () => --count
      };
    }

    // 카운터 UI를 일괄 처리해주는 함수
    function initializeCountPanel(counterId) {
      // 카운터 요소노드 가져오기
      const $increaseBtn = document.getElementById(`increase${counterId}`);
      const $decreaseBtn = document.getElementById(`decrease${counterId}`);
      const $text = document.querySelector(`.count${counterId}`);

      // 카운터의 클로저 호출
      const { increment, decrement } = counterClosure();
      $increaseBtn.addEventListener('click', e => {
        $text.textContent = increment();
      });
      $decreaseBtn.addEventListener('click', e => {
        $text.textContent = decrement();
      });

    }

    // 첫번째 카운터 패널 세팅

    for (let i = 1; i <= document.querySelectorAll('.counter').length; i++) {
      initializeCountPanel(i);
    }
  </script>
</body>
</html>
